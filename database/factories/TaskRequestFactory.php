<?php

namespace Database\Factories;

use App\Models\Customer;
use App\Models\User;
use Illuminate\Database\Eloquent\Factories\Factory;

class TaskRequestFactory extends Factory
{
    protected $model = \App\Models\TaskRequest::class;

    public function definition(): array
    {
        $faker = \Faker\Factory::create('ru_RU');

        $customer = Customer::factory()->create();
        $user = User::factory()->create();
        $responsibleUser = $faker->boolean(50) ? User::factory()->create() : null;
        $withProject = $faker->boolean(30);

        $projectNames = [
            'CRM-система',
            'Интернет-магазин',
            'Мобильное приложение',
            'Веб-портал',
            'Корпоративный сайт',
            'E-commerce платформа',
            'Чат-бот',
            'Система аналитики',
            'ERP-система',
            'Маркетплейс',
            'Система бронирования',
            'Платформа для обучения',
            'Дашборд',
            'Система управления складом',
            'Платформа для мероприятий',
            'Система уведомлений',
            'Блог',
            'Система управления заказами',
            'Платформа для стриминга',
            'API для финтеха',
            'Модуль отчетов',
            'Система поиска',
            'Landing page',
            'Система интеграции с 1С',
            'Платформа для вебинаров'
        ];

        $taskTitles = [
            'Запрос на разработку API',
            'Создание прототипа интерфейса',
            'Интеграция с платежной системой',
            'Оптимизация базы данных',
            'Тестирование мобильного приложения',
            'Разработка модуля авторизации',
            'Редизайн сайта',
            'Настройка CI/CD',
            'Анализ требований',
            'Создание чат-бота',
            'Интеграция с CRM',
            'Разработка дашборда',
            'Оптимизация производительности',
            'Настройка сервера',
            'Создание модуля отчетов',
            'Тестирование API',
            'Разработка landing page',
            'Интеграция с 1С',
            'Создание системы уведомлений',
            'Аудит безопасности',
            'Разработка модуля поиска',
            'Оптимизация SEO',
            'Создание системы аналитики',
            'Разработка модуля оплаты',
            'Тестирование UX'
        ];

        $descriptions = [
            'Требуется разработать REST API для интеграции с внешними сервисами.',
            'Создание прототипа интерфейса в Figma для нового приложения.',
            'Интеграция с платежными системами (Stripe, PayPal, ЮKassa).',
            'Оптимизация запросов к базе данных для повышения скорости.',
            'Проведение автотестов для мобильного приложения на iOS/Android.',
            'Разработка модуля авторизации с поддержкой JWT и OAuth2.',
            'Редизайн корпоративного сайта с акцентом на UX/UI.',
            'Настройка CI/CD пайплайна с использованием Jenkins.',
            'Сбор и анализ требований для нового функционала.',
            'Создание чат-бота для Telegram с интеграцией CRM.',
            'Интеграция с существующей CRM для обмена данными.',
            'Разработка дашборда для мониторинга бизнес-метрик.',
            'Оптимизация серверной части для снижения нагрузки.',
            'Настройка облачного сервера на AWS или Azure.',
            'Создание модуля генерации отчетов в PDF и Excel.',
            'Тестирование API на производительность и ошибки.',
            'Разработка landing page для рекламной кампании.',
            'Интеграция с 1С для автоматизации учета.',
            'Создание системы push-уведомлений для пользователей.',
            'Проведение аудита безопасности приложения.',
            'Разработка модуля поиска с фильтрами и автодополнением.',
            'Оптимизация SEO для улучшения ранжирования.',
            'Создание системы аналитики с интеграцией Google Analytics.',
            'Разработка модуля оплаты с поддержкой мультивалютности.',
            'Проведение UX-тестирования для улучшения интерфейса.'
        ];

        return [
            'title' => $faker->randomElement($taskTitles),
            'description' => $faker->randomElement($descriptions),
            'with_project' => $withProject,
            'project_name' => $withProject ? $faker->randomElement($projectNames) . ' для ' . $faker->company : null,
            'user_id' => $user->id,
            'responsible_user_id' => $responsibleUser?->id,
            'customer_id' => $customer->id,
            'created_at' => now(),
            'updated_at' => now(),
        ];
    }
}
